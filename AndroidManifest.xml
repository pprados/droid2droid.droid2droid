<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
	  package="org.remoteandroid"
      android:sharedUserId="org.remoteandroid"
      android:versionCode="1"
      android:versionName="0.1"
      android:installLocation="internalOnly"
	  android:sharedUserLabel="@string/shared_user"
	  >

	<uses-sdk android:minSdkVersion="3" android:targetSdkVersion="14"/>
    <compatible-screens>
        <!-- all small size screens -->
        <screen android:screenSize="small" android:screenDensity="ldpi" />
        <screen android:screenSize="small" android:screenDensity="mdpi" />
        <screen android:screenSize="small" android:screenDensity="hdpi" />
        <screen android:screenSize="small" android:screenDensity="xhdpi" />
        <!-- all normal size screens -->
        <screen android:screenSize="normal" android:screenDensity="ldpi" />
        <screen android:screenSize="normal" android:screenDensity="mdpi" />
        <screen android:screenSize="normal" android:screenDensity="hdpi" />
        <screen android:screenSize="normal" android:screenDensity="xhdpi" />
    </compatible-screens>
	<supports-screens android:xlargeScreens="true"
                    android:largeScreens="true"
                    android:normalScreens="true"
                    android:smallScreens="true"
                    android:anyDensity="true"/>
	<user-feature android:name="android.hardware.telephony" android:required="false"/>
	<uses-feature android:name="android.hardware.bluetooth" android:required="false"/>		
	<uses-feature android:name="android.hardware.wifi" android:required="false"/>
	<user-feature android:name="android.hardware.nfc" android:required="false"/>
	<user-feature android:name="android.hardware.faketouch" android:required="false"/>
	<user-feature android:name="android.hardware.touchscreen" android:required="false"/>
	<uses-feature android:name="android.hardware.camera" android:required="false"/>
	<uses-feature android:name="android.hardware.camera.autofocus"  android:required="false"/>	
    
    <permission 
    	android:name="org.remoteandroid.permission.discover.SEND"
        android:label="@string/permission_discover_label"
        android:description="@string/permission_discover_desc"
        android:protectionLevel="signature" />
    <permission 
    	android:name="org.remoteandroid.permission.discover.RECEIVE"
        android:label="@string/permission_discover_label"
        android:description="@string/permission_discover_desc"
        android:protectionLevel="normal" />


	<!-- Private privileges -->
	<uses-permission android:name="org.remoteandroid.permission.discover.SEND"/>
	<uses-permission android:name="org.remoteandroid.permission.discover.RECEIVE"/>
	<!--uses-permission android:name="org.remoteandroid.permission.INVOKE"/-->

	<!-- Reset when boot -->
	<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>

	<!-- For using wifi -->
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"/>
    <uses-permission android:name="android.permission.VIBRATE"/>

    <!-- For using bluetooth --> 
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
        
	<!-- For install packages -->    
    <uses-permission android:name="android.permission.INSTALL_PACKAGES" />

	<!--  For QRCode -->
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.FLASHLIGHT"/>
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    
    <application 
    	android:debuggable="true" 
    	android:icon="@drawable/ic_launcher_remoteandroid" 
    	android:name=".Application"
    	android:label="@string/app_name"
    	android:process="org.remoteandroid"
    	android:description="@string/app_description" 
    	android:enabled="true" 
    	android:restoreAnyVersion="true" 
    	android:killAfterRestore="false" 
    	android:persistent="true" 
    	android:backupAgent=".service.RemoteAndroidBackup" 
    	android:allowBackup="false"
    	android:hardwareAccelerated="true"
    >
		<meta-data 
			android:name="com.google.android.backup.api_key"
    		android:value="AEdPqrEAAAAIq1QBXQJdImC3ZV8yuCysgzPs6oXyeg9AnYIfxQ" />
		<!-- Start when device boot -->
		<receiver android:name=".service.RemoteAndroidReceiver" 
			android:exported="false" 
			android:enabled="true">
			<intent-filter>
				<action android:name="android.intent.action.BOOT_COMPLETED" />
			</intent-filter>
		</receiver>



		<!-- The service to listen socket -->
		<service 
			android:enabled="true"
			android:exported="true"
			android:label="@string/service_label" 
			android:icon="@drawable/ic_launcher_remoteandroid" 
			android:description="@string/service_description" 
			android:name=".service.RemoteAndroidService">
			<intent-filter>
				<action android:name="org.remoteandroid.service.RemoteAndroid"/>
				<action android:name="org.remoteandroid.DISCOVER"/>
			</intent-filter>
		</service>

		<!--  Activity to parameter service -->
        <activity 
        	android:name=".ui.EditPreferenceActivity"
        	android:exported="true"
        	android:launchMode="singleTask"
        	android:label="@string/app_name" 
        	android:description="@string/editpreference_description" 
        	android:icon="@drawable/ic_launcher_remoteandroid"
			android:configChanges="orientation|screenSize"
        	>
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <action android:name="org.remoteandroid.action.LAN" />
                <action android:name="org.remoteandroid.action.WLAN" />
                <category android:name="android.intent.category.LAUNCHER" />
                <category android:name="android.intent.category.PREFERENCE" />               
            </intent-filter>
            
			<!-- Intent sur URL pour pouvoir ouvrir sur QRCode -->  
			<!-- http://xebralabs.blogspot.com/2011/03/qr-code-to-launch-your-app.html -->        
			<!--  Avec sheme spÃ©cifique: http://stackoverflow.com/questions/5575069/can-i-invoke-a-custom-application-with-a-qr-code -->
			<intent-filter>
			  <action android:name="android.intent.action.VIEW"/>
			  <category android:name="android.intent.category.BROWSABLE"/>
			  <data android:scheme="qrcode" android:host="remoteandroid.org" android:path="/start"/>
			</intent-filter>
			
			<!-- If the APK is in /system/app directory, add settings in global settings -->
 			<intent-filter>
                <action android:name="com.android.settings.OPERATOR_APPLICATION_SETTING" />
            </intent-filter>
            <meta-data android:name="com.android.settings.title" 	android:resource="@string/app_title" />
            <!--meta-data android:name="com.android.settings.summary" 	android:resource="@string/app_summary" /-->
            <meta-data android:name="com.android.settings.icon" 	android:resource="@drawable/ic_menu_remoteandroid" />
            
        </activity>

		<!--  Activity to accept to pair device -->
        <activity 
	        android:name=".pairing.AskAcceptPairActivity"
        	android:exported="false" 
        	android:theme="@android:style/Theme.Translucent"
			android:noHistory="true"
			android:launchMode="singleTop"
			android:icon="@drawable/ic_launcher_remoteandroid"
			android:configChanges="orientation|screenSize"
	        />

        <activity 
	        android:name=".install.InstallApkActivity"
        	android:theme="@android:style/Theme.Translucent"
			android:icon="@drawable/ic_launcher_remoteandroid"
			android:exported="false" 
        	android:launchMode="singleInstance"
			android:noHistory="true"
			android:excludeFromRecents="true"
			android:multiprocess="false"
			android:taskAffinity=""
			android:configChanges="orientation|screenSize"
	        />
        
		<!--  Activity to accept to download an APK -->
        <activity 
	        android:name=".install.AskAcceptDownloadApkActivity"
        	android:theme="@android:style/Theme.Translucent"
			android:icon="@drawable/ic_launcher_remoteandroid"
			android:exported="false" 
        	android:launchMode="singleInstance"
			android:noHistory="true"
			android:excludeFromRecents="true"
			android:multiprocess="false"
			android:taskAffinity=""
			android:configChanges="orientation|screenSize"
	        />

		<!--  Activity to download an APK -->
        <activity 
        	android:name=".install.DownloadApkActivity"
        	android:theme="@android:style/Theme.Translucent"
			android:icon="@drawable/ic_launcher_remoteandroid"
			android:exported="false" 
        	android:launchMode="singleInstance"
			android:noHistory="true"
			android:excludeFromRecents="true"
			android:multiprocess="false"
			android:taskAffinity=""
			android:configChanges="orientation|screenSize"
        />
        
        
        <activity 
        	android:name=".ui.connect.ConnectActivity" 
			android:icon="@drawable/ic_launcher_remoteandroid"
			android:launchMode="standard" 
			android:taskAffinity=""
			android:exported="true"
			android:configChanges=""
		>
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <action android:name="org.remoteandroid.action.Connect" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity 
        	android:name=".ui.connect.SampleActivity" 
			android:launchMode="standard" 
			android:taskAffinity=""
			android:exported="true"
			android:configChanges=""
		>
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <action android:name="org.remoteandroid.action.Connect" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

            <!--  QRCode : TODO : Remove -->
         <activity 
        	android:name=".ui.connect.qrcode.TestQRCode" 
			android:exported="false" 
        	android:launchMode="standard"
			android:configChanges="orientation|screenSize"
         >
         </activity>
        <activity 
        	  android:name=".ui.connect.qrcode.CaptureQRCodeActivity" 
			  android:exported="true" 
			  android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
              android:screenOrientation="landscape"
              android:configChanges="keyboardHidden"
              android:windowSoftInputMode="stateAlwaysHidden"
              >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        	
        </activity>

    </application>


</manifest> 
